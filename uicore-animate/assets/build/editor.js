(()=>{"use strict";const e=window.wp.blockEditor,a=window.wp.components,i=window.wp.element,t=window.wp.hooks,n=window.wp.i18n,l=window.ReactJSXRuntime;(0,t.addFilter)("editor.BlockEdit","uicore-animate/add-animation-controls",(t=>o=>{const{attributes:r,setAttributes:u,name:s,clientId:m}=o;if(-1!==s.indexOf("uicore/"))return(0,l.jsx)(t,{...o});const{uiAnimateName:c,uiAnimateDuration:d,uiAnimateDelay:A,uiAnimateTrigger:g,uiAnimateDelayEnd:y}=r;return(0,i.useEffect)((()=>{"scroll"===g&&((e,a)=>{const i=`uicore-animate-style-${e}`;let t=document.getElementById(i);t||(t=document.createElement("style"),t.id=i,document.head.appendChild(t));const{uiAnimateDelay:n,uiAnimateDelayEnd:l}=a,o=`\n        .wp-block[data-block="${e}"] {\n            ${n?`--ui-anim-start: ${n}vh;`:""}\n            ${l?`--ui-anim-end: ${l}vh;`:""}\n        }\n    `;t.innerHTML=o})(m,r)}),[c,A,y]),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(t,{...o}),(0,l.jsx)(e.InspectorControls,{children:(0,l.jsxs)(a.PanelBody,{className:"components-panel__body-toggle uicore-animate-panel",title:(0,n.__)("Animations","uicore-animate"),initialOpen:!1,children:[(0,l.jsx)(a.SelectControl,{label:(0,n.__)("Animation","uicore-animate"),value:c,options:[{label:(0,n.__)("None","uicore-animate"),value:""},...window.uicore_animations_list],onChange:e=>u({uiAnimateName:e})}),(0,l.jsx)(a.SelectControl,{label:(0,n.__)("Trigger","uicore-animate"),value:g,options:[{label:(0,n.__)("Scroll","uicore-animate"),value:"scroll"},{label:(0,n.__)("Entrance","uicore-animate"),value:"entrance"}],onChange:e=>u({uiAnimateTrigger:e})}),"scroll"!==g&&(0,l.jsx)(a.SelectControl,{label:(0,n.__)("Duration","uicore-animate"),value:d,options:[{label:(0,n.__)("Fast","uicore-animate"),value:"fast"},{label:(0,n.__)("Normal","uicore-animate"),value:""},{label:(0,n.__)("Slow","uicore-animate"),value:"slow"}],onChange:e=>u({uiAnimateDuration:e})}),(0,l.jsx)(a.TextControl,{label:"scroll"===g?(0,n.__)("Start Offset (vh)","uicore-animate"):(0,n.__)("Delay (ms)","uicore-animate"),value:A,placeholder:"scroll"===g?"10":"100",type:"number",onChange:e=>u({uiAnimateDelay:e})}),"scroll"===g?(0,l.jsx)(a.TextControl,{label:(0,n.__)("End Offset (vh)","uicore-animate"),value:y,placeholder:"50",type:"number",onChange:e=>u({uiAnimateDelayEnd:e})}):(0,l.jsx)(a.Button,{className:"button button-secondary",onClick:e=>{e.target.disabled=!0;let a=document.querySelector(`.wp-block[data-block="${m}"]`);if(!a){const e=window.parent.document.querySelector('iframe[name="editor-canvas"]'),i=e.contentDocument||e.contentWindow.document;a=i.querySelector(`.wp-block[data-block="${m}"]`)}a.classList.add("uicore-animate-hide"),setTimeout((()=>{a.classList.add(c),a.classList.remove("uicore-animate-hide"),"fast"===d?a.classList.add("animated","animated-fast"):"slow"===d?a.classList.add("animated","animated-slow"):a.classList.add("animated")}),50),setTimeout((()=>{a.classList.remove(c),e.target.disabled=!1}),2e3)},children:(0,n.__)("Play Animation","uicore-animate")})]})})]})})),(0,t.addFilter)("editor.BlockListBlock","uicore-animate/add-animation-class-and-style",(e=>a=>{const{attributes:i}=a;if(-1!==a.block.name.indexOf("uicore/"))return(0,l.jsx)(e,{...a});if(i.uiAnimateName){const t={className:`${a.className} ${"scroll"===i.uiAnimateTrigger?"uicore-animate-scroll "+i.uiAnimateName:""}`};return(0,l.jsx)(e,{...a,...t})}return(0,l.jsx)(e,{...a})})),(0,t.addFilter)("blocks.registerBlockType","uicore-animate/add-animation-attribute",((e,a)=>(-1!==a.indexOf("uicore/")||(e.attributes={...e.attributes,uiAnimateTrigger:{type:"string",default:"entrance"},uiAnimateName:{type:"string",default:""},uiAnimateDuration:{type:"string",default:""},uiAnimateDelay:{type:"string",default:""},uiAnimateDelayEnd:{type:"string",default:""}}),e))),(0,t.addFilter)("blocks.getSaveContent.extraProps","uicore-animate/add-animation-data-attributes",((e,a,i)=>(-1!==a?.name?.indexOf("uicore/")||i.uiAnimateName&&(e={...e,..."scroll"!=i.uiAnimateTrigger&&{"data-ui-trigger":i.uiAnimateTrigger,"data-ui-animation":i.uiAnimateName,...i.uiAnimateDuration?{"data-ui-duration":i.uiAnimateDuration}:{},...i.uiAnimateDelay?{"data-ui-delay":i.uiAnimateDelay}:{}},className:`${e.className} ${"scroll"===i.uiAnimateTrigger?"uicore-animate-scroll "+i.uiAnimateName:"uicore-animate-hide"}`,style:{...e.style,..."scroll"===i.uiAnimateTrigger&&{...i.uiAnimateDelay?{"--ui-anim-start":`${i.uiAnimateDelay}vh`}:{},...i.uiAnimateDelayEnd?{"--ui-anim-end":`${i.uiAnimateDelayEnd}vh`}:{}}}}),e)))})();